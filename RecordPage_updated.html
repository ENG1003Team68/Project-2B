<html>
    <head>
        <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.4/material.indigo-pink.min.css">
        <script src="https://storage.googleapis.com/code.getmdl.io/1.0.4/material.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        
        <style>
            body {
                background-image: url("nadal.jpg");
            }
            #recordTable th, #statusTable th, #modeTable th{
                background-color: aquamarine;
                font-family: "Trebuchet MS", Helvetica, sans-serif;
                font-size: 25px;
                text-align:center;
            }
            #recordTable td {
                font-family: "Trebuchet MS", Helvetica, sans-serif;
                font-size: 35px;
                text-align:center;
            }
            #statusTable td, #modeTable td{
                font-family: "Trebuchet MS", Helvetica, sans-serif;
                font-size: 30px;  
                text-align:center;
            }
            #recordTable tr {
                align-content: center;
            }
            #recordTable{
                display: inline-block;
            }
            #statusTable, #modeTable{
                display: inline-block;            
            }
            #functions{
                margin-bottom: 10%;
                margin-top: 4%;
            }
        </style>
    </head>

    <body>
    
        <script>
            <!-- Timer Function -->
            var time = 0;
            var running = 0;
            var select = 0;
            var modeWalk = 0, modeRun = 0, modeCycle = 0;
            
            function startPause(){
                if(modeWalk == 0 && modeCycle == 0 && modeRun == 0){
                    alert("Select an Activity first!");
                }
                    else{
                    select = 1;
                    }
                if(running == 0 && select == 1){
                    running = 1;
                    increment();
                    document.getElementById("play").innerHTML = "pause_circle_outline";
                    document.getElementById("recordStatus").innerHTML = "Recording!";
                        }
                    else{
                        running = 0;
                        document.getElementById("play").innerHTML = "play_circle_outline";
                    }
                if(running == 0 && time > 0){
                document.getElementById("recordStatus").innerHTML = "Paused";
                }
            }

            
            function reset(){
                if(running == 0 && time > 0){
                    running = 0;
                    time = 0;
                    select = 0;
                    modeWalk = 0;
                    modeRun = 0;
                    modeCycle = 0;
                    document.getElementById("output").innerHTML = "00:00:00:0";
                    document.getElementById("modeOutput").innerHTML = "Select an Activity";
                    document.getElementById("recordStatus").innerHTML = "Not Recording";
                    alert("Run has been deleted!");
                }
                else if(time == 0){
                    var error = alert("Record a run first by pressing the start button!");
                }
            }
            
            function increment(){
                if(running == 1){
                setTimeout(function(){
                    time++;
                    
                    var hours = Math.floor(time/10/60/60);
                    var mins = Math.floor((time/10/60) % 60);
                    var secs = Math.floor(time/10 % 60);
                    var tenths = time % 10;
                    
                    if(hours < 10){
                        hours = "0" + hours;
                    }
                    if(mins < 10){
                        mins = "0" + mins;
                    }
                    if(secs < 10){
                        secs = "0" + secs;
                    }
                    document.getElementById("output").innerHTML = hours + ":" + mins + ":" + secs + ":" + tenths;
                    increment();  
                }, 100);
                } 
            }
            
            
            function finish(){
                if(running == 0 && time > 0){
                    var description = prompt("Enter a description of your run:", "Enter Description...");   
                }
                else if(running == 0 || time == 0){
                    var error = alert("Record a run first by pressing the start button!");
                }
            
            }
            
            function run(){
                
                if(running == 0 && time == 0){
                    modeRun = 1;
                    if(modeCycle == 1 || modeWalk == 1){
                        modeCycle = 0;
                        modeWalk = 0;
                    }
                    var mode = document.getElementById("modeOutput");
                    mode.innerHTML = "Running";
                }
                else{
                }
            }
                
            function cycle(){
                
                if(running == 0 && time == 0){
                    modeCycle = 1;
                    if(modeRun == 1 || modeWalk == 1){
                        modeRun = 0;
                        modeWalk = 0;
                    }
                    var mode = document.getElementById("modeOutput");
                    mode.innerHTML = "Cycling";
                }
                else{
                }
            }
            
            function walk(){
                
                if(running == 0 && time == 0){
                    modeWalk = 1;
                    if(modeCycle == 1 || modeRun == 1){
                        modeCycle = 0;
                        modeRun = 0;
                    }
                    var mode = document.getElementById("modeOutput");
                    mode.innerHTML = "Walking";
                }
                else{
                }
            }
            </script>
        
<!-- Uses a header that scrolls with the text, rather than staying
  locked at the top -->
            <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
                <header class="mdl-layout__header mdl-layout__header--scroll">
                    <div class="mdl-layout__header-row">
      <button class="mdl-button mdl-js-button mdl-button--icon" onclick="location.href='index_updated.html';">
       <i class="material-icons">arrow_back</i>
      </button> 
                        <!-- Title -->
                        <span class="mdl-layout-title" style="margin-left:2%">Record Page (we can change the title later)</span>
                        <!-- Add spacer, to align navigation to the right -->
                        <div class="mdl-layout-spacer"></div>
                        <!-- Colored FAB button with ripple -->
                        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="run()">
                            <i class="material-icons">directions_run</i>
                        </button>
                        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="cycle()">
                            <i class="material-icons">directions_bike</i>
                        </button>
                        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="walk()">
                            <i class="material-icons">directions_walk</i>
                        </button>
                    </div>
                </header>
                <main class="mdl-layout__content">
                    <div class="page-content"><!-- Your content goes here --></div>
                </main>
     
    <!Map>
                <div>    
                    <head>
                        <style type="text/css">
                            html, body { height: 100%; margin: 0; padding: 0; }
                            #map { height: 55%; width: 75%; margin-top: 5%; margin-left: auto; margin-right: auto; margin-bottom: 10%;}
                        </style>
                    </head>
                    <body>
                        <div id="map"></div>
                        <script type="text/javascript">

                            var map;
                            function initMap() {
                                map = new google.maps.Map(document.getElementById('map'), {
                                    center: {lat: -37.9120467, lng: 145.1343136},
                                    zoom: 17
                                });
                           
                                    // Try HTML5 geolocation.
                                if (navigator.geolocation) {
                                    navigator.geolocation.getCurrentPosition(function(position) {
                                        var pos = {
                                            lat: position.coords.latitude,
                                            lng: position.coords.longitude
                                        };
                                            var marker = new google.maps.Marker({
                                position: pos,
                                map: map,
                                title: 'Start Location'
                                });
                                
                                        var marker = new google.maps.Marker({
                                position: pos,
                                map: map,
                                title: 'Start Location'
                                });
                                        map.setCenter(pos);
                                        }
                                    )
                                }
                            }
                            

                      
                        </script>
                        
                        <script async defer
                                src="https://maps.googleapis.com/maps/api/js?v=3&amp;key=&amp;callback=initMap">
                        </script>
                    </body>
                </div>
                
                <center>
                <div>   
                    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" style=";margin-top:2%;margin-bottom:2%;margin-right:2%;margin-left:2%;" id="recordTable">
                        <thead>
                            <tr>
                                <th class="mdl-data-table__cell--non-numeric">Time</th>
                                <th>Distance</th>
                                <th>Average Speed</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="mdl-data-table__cell--non-numeric" id="output">00:00:00:0</td>
                                <td id="">25km</td>
                                <td id="">2.90km/h</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                    
                <div>
                    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" style=";margin-top:2%;margin-bottom:2%;margin-right:4%" id="statusTable">
                        <thead>
                            <tr>
                                <th>Status</th>
                            </tr>
                        </thead>
                        
                        <tbody>
                            <tr>
                                <td id="recordStatus">Not Recording</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp" style=";margin-top:2%;margin-bottom:2%" id="modeTable">
                        <thead>
                            <tr>
                                <th>Activity</th>
                            </tr>
                        </thead>
                        
                        <tbody>
                            <tr>
                                <td id="modeOutput">Select an activity</td>
                            </tr>
                        </tbody>
                    </table>
                    
                </div>
                </center>
                    
                <center id="functions">   
                    <!-- Colored FAB button with ripple -->
                    <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="startPause()">
                        <i class="material-icons" id="play">play_circle_outline</i>
                    </button>
                    <!-- Colored FAB button with ripple -->
                    <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="finish()">
                        <i class="material-icons">done</i>
                    </button>
                    <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" onclick="reset()">
                        <i class="material-icons" id="delete">delete</i>
                    </button>
                </center>   
    
    
        </div>
    </body>

</html>